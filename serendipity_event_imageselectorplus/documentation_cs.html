<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
    <title>Dokumentace: Avatar Plugin</title>
</head>
<body>
<h1>Dokumentace pluginy Serendipity ImageSelectorPlus</h1>

<p>Dokumentaci k tomuto pluginu pøeložil do èeštiny Vladimír Ajgl (vlada [zavinac] ajgl [tecka] cz) dne 26.6.2011. Od té doby mohl být plugin pozmìnìn nebo mohly být rozšíøené jeho funkce. Zkontrolujte pro jistotu i <a href="documentation_en.html">anglickou dokumentaci</a> a <a href="ChangeLog">ChangeLog</a>.

<h2>Obecný popis</h2>
<p>
    Plugin ImageSelectorPlus se používá k usnadnìní práce s obrázky, pøedevším k vkládání obrázkù z mediatéky (interní galerie Serendipity).
</p>

<h2>QuickBlog</h2>
<p>
Pøi nahrávání obrázku ho rovnou mùžete vystavit jako pøíspìvek. Øiïte se podle instrukcí nad formuláøem QuickBlogu na stranì s nahráváním souborù.
</p>

<h3>Zmìna vzhledu pøíspìvku QuickBlogu</h3>
<p>
    Plugin používá šablonu "plugin_quickblog.tpl". Její zmìnou zmìníte vzhled vkládaných obrázkù.
</p>

<p>Informace o obrázku jsou uchovány v poli {$quickblog}, které má tyto èásti:
    <ul>
        <li>fullimage - cesta a název velkého souboru</li>
        <li>image - cesta a název k náhledu</li>
        <li>body - tìlo pøíspìvku</li>
        <li>exif_mode - zpùsob získání exif tagù z fotky ('internal', 'jhead', 'none')</li>
        <li>exif - pole obsahující rùzné exif tagy, pro jejich názvy si najdìte dokumentaci exif tagù - jejich názvy použijte následovnì, pøíklad $quickblog.exif.COMMENT nebo $quickblog.exif.Focal_length</li>
    </ul>
</p>


<h2>Hromadné vkládání obrázkù</h2>
     Další funkcí je hromadné vkládání obrázkù. Funguje na principu, že v textu pøíspìvku napíšete xml strukturu, kterou plugin nahradí obrázky z databáze.
</p>

<h3>Kdy se to hodí?</h3>
<p>
    Když píšete fotoblog a potøebujete do pøíspìvku vkládat více obrázkù najednou. Když máte padesát fotek, které jsou navíc oèíslované, tak je mùžete vložit buï po jedné, jak to Serendipity umožòují v základu, nebo pomocí jediné øádky s použitím popisovaného pluginu.
</p>

<h3>Pøíklady</h3>
    <h4>Pøíklad 1 - vkládáme èásti galerie</h4>
    <code><pre>
        &lt;mediainsert&gt;
            &lt;gallery name="MyHolidays/" /&gt;
            &lt;media type="single" name="pict0034" /&gt;
            &lt;media type="single" name="pict0032" /&gt;
            &lt;media type="range" prefix="pict00" start="35" stop="52" /&gt;
        &lt;/mediainsert&gt;
    </pre></code>
    <p>
        Takto vložíme z galerie "MyHolidays" obrázek "pict0034", po nìm obrázek "pict0032" a pak všechny obrázky od "pict0035" do "pict0052".

        <ul>
        Chování pluginu:
        <li>Zobrazuje pouze obrázky, které jsou pøítomny v databázi. Takže pokud zrovna obrázky 44,45,48 a 50 v databázi nejsou, pluginu to nevadí a nespadne. Jednoduše tyto obrázky vynechá.</li>
        <li>Zachovává poøadí obrázkù z xml. Tedy obrázek 34 bude zobrazen pøed obrázkem 32.</li>
        </ul>
    </p>

    <h4>Pøíklad 2 - vkládáme celou galerii najednou</h4>
    <code><pre>
        &lt;mediainsert&gt;
            &lt;gallery name="MyHolidays/" /&gt;
            &lt;media type="gallery" /&gt;
        &lt;/mediainsert&gt;
    </pre></code>

<h3>Dùležité</h3>
<p>Plugin je relativnì citlivý na (ne)správnost syntaxe xml. Pokud není bezchybná, typicky zapomenete na ukonèovací zpìtné lomítko v tagu media, mùžete vyøadit z èinnosti celý blog!!! (prostì není ošetøená kontrola správnosti syntaxe a parser na špatné syntaxi havaruje)</p>

<h3>Pøehled xml tagù</h3>
<dl>
    <dt>&lt;mediainsert&gt;</dt>
    <dd>hlavní kontejner pro vkládané obrázky</dd>

    <dt>&lt;gallery&gt;</dt>
    <dd>cesta ke galerii, ze které mají být brány obrázky (reltivnì k adresáøi uploads/ - bez úvodního lomítka a s ukonèujícím lomítkem - "MyHolidays" nebo "/MyHolidays/" jsou špatnì. Správnì je "MyHolidays/".)</dd>

    <dt>&lt;media&gt;</dt>
    <dd>Urèuje, které obrázky mají být vloženy. Na základì atributu "type" je možno vložit obrázky tøemi zpùsoby:

        <ul>
            <li>"single" - vloží jeden obrázek se jménem zadaným atributem "name"</li>
            <li>"gallery" - bez dalších atributù, vloží celou galerii</li>
            <li>"range" - vloží èíslované obrázky od obrázku "prefix""start" do obrázku "prefix""stop" (viz. pøíklad 1)</li>
        </ul>
    </dd>
</dl>

<h3>Zmìna vzhledu vkládaných obrázkù</h3>
<p>
    Plugin používá šablonu "plugin_mediainsert.tpl". Její zmìnou zmìníte vzhled vkládaných obrázkù.</p>

    <p>Informace o obrázku jsou uchovány v poli {$plugin_mediainsert_media}, které má tyto èásti:
    <ul>
        <li>name - jméno obrázku (název souboru bez pøípony)</li>
        <li>extension - pøípona souboru</li>
        <li>realname - celé jméno souboru, to samé jako {$name}.{$extension}</li>
        <li>thumbnail_name - název souboru s náhledem dostanete následovnì - {$name}.{$thumbnail_name}.{$extension}</li>
        <li>path - cesta ke galerii, stejná hodnota, kteoru zadáváte v tagu "gallery"</li>
        <li>comment1 - krátký komentáø z databáze</li>
        <li>width - šíøka pùvodního (velkého) obrázku</li>
        <li>height - výška pùvodního (velkého) obrázku</li>
        <li>thumbwidth - šíøka náhledu</li>
        <li>thumbheight - výška náhledu</li>
    </ul>
</p>


<h2>Rozbalování ZIP archivù</h2>

<h3>K èemu je to dobré</h3>
<p>Kupøíkladu když chcete nahrát mnoho souborù najednou. Nemusíte vybírat jednotlivé soubory po jednom (což je zdlouhavé). Prostì je zabalíte do zip archivu, nahrajete tento archiv a ten bude na blogu rozbalen.</p>

<h3>Vlastnosti rozbalování ZIPù</h3>
<p>
<ul>
<li>Soubory z archivu jsou rozbaleny do stejného adresáøe, do kterého je nahrán archiv.</li>
<li>Rozbalené soubor (což nemusí být nutnì obrázky) jsou vloženy do databáze médií.</li>
<li>Pokud zvolíte volbu "Zadat vlastnosti", rozbalené obrázky se také zorazí pro zadávání vlastností.</li>
<li>Nenahrávejte ZIP archivy s podadersáøi. Netestoval jsem to, ale obávám se, že se tyto adresáøe nevytvoøí a všechny soubory se rozbalí do jednoho adresáøe.</li>
<li>Dávejte pozor na velikost ZIP archivu. Na webu máte nastavené urèité omezení týkající se maximální velikosti nahrávaného souboru (obvykle to bývá 10MB).</li>
</ul>
</p>


<h2>Automatická zmìna velikosti obrázkù</h2>

<p>Tato funkce automaticky prohledá pøíspìvek blogu a vyhledá obrázky, které jsou zadány ve formì:</p>

<pre>
&lt;img src="/uploads/mujobrazek.jpg" width="100" height="150" /&gt;
</pre>

<p>Když najde obrázek v tomto formátu (pokud najde obrázek s definovanou výškou a/nebo šíøkou), nahradí jeho atribut 'src' (adresa obrázku) odkazem na skript pro zmìnu velikosti obrázku 'serendipity_admin_image_selector.php'. Tedy pøepíše odkaz na nìco jako:</p>

<pre>
&lt;img src="http://www.mujblog.cz/serendipity_admin_image_selector.php?serendipity[image]=1&serendipity[disposition]=inline&serendipity[step]=showItem&serendipity[resizeWidth]=100&serendipity[resizeHeight]=150" width="100" height="150" /&gt;
</pre>

<p>Tato vlastnost šetøí váš èás, pokud potøebujete použít stejný obrázek ve více rozlišeních a mùže také ušetøit èas nutný pro stažení obrázkù pøi prohlížení vašeho blogu. Vliv na rychlost blogu je minimální, protože se zmìna velikosti obrázku provede jenom jednou, pøi prvním pøepisu tagu &lt;img&gt;.
</p>

<h3>Poznámky</h3>

<ol>
<li>Pomìr stran obrázku je zachován.</li>
<li>Staèí definovat pouze jeden z atributù 'width' nebo 'height'. Pokud není zadán žádný z nich, obrázek je ignorován a adresa není nahrazena adresou na skript pro zmìnu velikosti obrázku.</li>
<li>Pokud jsou zadány dohromady jak šíøka ('width'), tak výška ('height'), obrázek bude zvìtšen/zmenšen pøi zachování pomìrù stran tak, aby se vešel do zadané oblasti.</li>
</ol>

<h2>Autoøi</h2>
<p>
Garvin Hicking, Nìmecko - všechno ostatní<br />
Vladimír Ajgl (vlada [at] ajgl [dot] cz), Èeská republika, 19.11.2007 - hromadné vkládání obrázkù do pøíspìvkù pomocí XML, hromadné nahrávání v ZIP souboru
</p>


<h2>Historie verzí (ChangeLog)</h2>

<ul>
<li>nejnovìjší verze</li>
	<ul>
	<li>Dopøedná kompatibilita se smarty3</li>
	</ul>
<li>verze 0.28</li>
	<ul>
	<li>Pøedávání promìnné $eventData do šablony plugin_mediainsert.tpl, pomocí smarty tagu {$plugin_mediainsert_entry}.</li>
	</ul>
<li>verze 0.20 [Vladimír Ajgl]</li>
	<ul>
	<li>Pøidána dokumentace (documentation_en.html, documentation_cs.html)</li>
	<li>Pøidán èeský pøeklad</li>
	<li>Pøidána funkce hromadného vkládání fotek do pøíspìvkù pomocí XML kódu (pouze s PHP5)</li>
	</ul>
</ul>

</body>
</html>
