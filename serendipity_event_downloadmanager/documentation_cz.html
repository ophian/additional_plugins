<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
		<title>Dokumentace: Downloadmanager</title>
		<style>
        	pre {
				display: block;
				padding: 5px;
				border: solid 1px #333333;
				background-color: #cccccc;
			}
		</style>
	</head>
	<body>
	<h1>Dokumentace k pluginu 'Downloadmanager'<br />
	<small>(serendipity_event_downloadmanager)</small></h1>
		<p>Dokumentaci k tomuto pluginu pøelo¾il do èe¹tiny Vladimír Ajgl (vlada [zavinac] ajgl [tecka] cz) dne 21.8.2011. Od té doby mohl být plugin pozmìnìn nebo mohly být roz¹íøené jeho funkce. Zkontrolujte pro jistotu i <a href="ChangeLog">aktuální anglický ChangeLog</a>.
		</p>
		
		<h2>Popis pluginu</h2>
		<p>Zaji¹»uje Serendipity v¹echny funkce download managera. Pøi odinstalování jsou odstranìny v¹echny tabulky z databáze (ztráta v¹ech dat)!!!</p>

		<h2>Historie verzí (ChangeLog)</h2>
		<ul>
			<li>nejnovìj¹í verze</li>	
			<ul>	
				<li>dopøedná kompatibilita se Smarty3</li>	
			</ul>

			<li>verze 0.26, 15.2.2011, [Ian Timbalu]</li>	
			<ul>	
				<li>zmìnìno - volání funkce smarty->fetch, aby bylo ménì pøísné, aby podporovalo zmìnu poètu a poøadí parametrù mezi specifikacemi Smarty 2 a Smarty 3 - odstranìn parametr 4</li>	
				<li>pøidáno - omezení funkcí backendu a odkazu na administraci v postranním sloupci pouze na administrátora</li>	
				<li>opraveno - zobrazení dat v ¹ablonách (*.tpl) frontendu pouze pøihlá¹eným u¾ivatelùm, pokud je to nastaveno</li>	
				<li>pøidáno - serendipity_db_bool() do $this->get_config('registered_only')</li>	
			</ul>

			<li>verze 0.25.1, 20.10.2010, [Ian Timbalu]</li>	
			<ul>	
				<li>opraveno - pøedávání parametrù odkazem pøi volání funkce bylo zneplatnìno od PHP 5.3.x</li>	
				<li>pøidáno - @silencer do mkdir a xhtml do &lt;hr&gt; tagu v if($coname == 'absincomingpath') echo '&lt;hr /&gt;';</li>	
			</ul>

			<li>verze 0.25, 23.9.2010, [Ian Timbalu]</li>	
			<ul>	
				<li>opraveno - ¹patná cesta, pøi kopírování souborù z mediatéky Serendipity do vybrané kategorie (pouze 0.25b)</li>	
				<li>zmìnìno - drobné detaily v jazykových souborech a ¹ablonách frontenu filelist.tpl a filedetails.tpl</li>	
				<li>pøidáno - mo¾nost pøejmenovat soubor v administraèní sekci na stránce editace souboru (to si vy¾ádalo pøidání nové jazykové konstanty do jazykového souboru)</li>	
				<li>zmìnìno - 0.25 beta verze v¹ech nových ¹ablon backendu a jejich stylopisy tak, aby obsahovaly nejnovìj¹í vzhled (zalo¾ený na designu u¾ivatele [YellowLed], díky!)</li>	
				<li>zmìnìno - hlavièka stránek v administraèní sekci, která nyní ukazuje zpìt na koøenový adresáø a na pøedchozí úroveò, pokud existuje</li>	
				<li>zmìnìno - nastavení databáze pro koøenovou úroveò, aby nebyla schovaná - to nezmìní chování pluginu pøi zobrzování souborù bez koøenové úrovnì, ale usnadní to pøístup k nim</li>	
				<li>pøidáno - nová ikona pro import do mediatéky Serendipity</li>	
				<li>opraveno - nìkolik potenciálních chyb a/nebo nepøíjemných vlastností, které se vyskytly ve verzi 0.24</li>	
				<li>pøidáno - názvy polí v smarty ¹ablonì pro backend, aby byly jedineèné v kontextu celého blogu - viz seznam v backend.dlm.index.tpl</li>	
				<li>pøidáno - kompletní ¹ablona pro backend, co¾ si vy¾ádalo vícero zmìn v kódu pluginu</li>	
			</ul>

			<li>verze 0.24, 26.8.2010, [Ian Timbalu]</li>	
			<ul>	
				<li>pøidáno - nové nastavení: 'intro', pøidává mo¾nost úvodního textu pøed vlastním obsahem ve frontendu (nepovinné)</li>	
				<li>pøidáno - ikona mime typu ics</li>	
				<li>zmìnìno - ¹ablony frontendu, frontend.cxx a ikony pro download, nyní nový svì¾í vzhled (navrhl [YelowLed], díky!)</li>	
				<li>zmìnìno - cesta souborù downloadmanageru zpìt na '/serendipty/archives/.dlm/files' and '/serendipty/archives/.dlm/ftpin', který vypadá jako nejlep¹í místo pro pohyb souborù. Adresáø /uploads pøedstavoval problém s mediatékou a adresáø /templates_c je v nìkterých pøípdech u¾ivateli mazán. Po konzultaci [Garvin] navrhl adresáø /archives. Sna¾il jsem se automatizovat pøesun adresáøù do nového adresáøe a do nového nastavení verze 0.24. Pokud zaznamenáte problémy, pøesuòte soubory prosím ruènì. Pokud uvidíte odkaz, abyste o tom informovali plugin, kliknìte na nìj. Pøí¹tí obnovení stránky nastaví 'chg2archivespath' na 'ano'. Odteï tyto adresáøe nejsou libovolnì nastavitelné a v nastavení pluginu jsou skryté.</li>	
				<li>zmìnìno - vyèi¹tìní a optimalizace kódu, okomentování funkcí, refaktoring</li>	
				<li>zmìnìno - soubory frontendu a ¹ablony kategorií, aby byly co nejvíce zalo¾eny na ¹ablonách smarty</li>	
				<li>pøidáno - promìnná smarty 'dlm_is_registered' do v¹ech tøí ¹ablon frontendu</li>	
				<li>pøidáno - nové nastavení, zobrazení kategorií a souborù ke sta¾ení pouze registrovaným a pøihlá¹eným u¾ivatelùm (výchozí: ne)</li>	
				<li>pøidáno a zmìnìno - nìkteré ikony backendu (ze starých o¹klivých na nové vymazlené)</li>	
				<li>zmìnìno - stylopisy frontend.css a backends.css, aby podporovaly zmìny v html kódu, stále ve vývoji</li>	
				<li>zmìnìno - mo¾nost vyèistit vstupní adresáø (ftp/trash) okam¾itì pomocí tlaèítka 'ko¹'</li>	
				<li>zmìnìno - pou¾ití vstupního adresáøe. Nyní je pou¾íván také jako ko¹/temp adresáø pro vymazané (pøesunuté) soubory!</li>	
				<li>pøidáno - rozbalovací nápovìda/tipy</li>	
				<li>zmìnìno a pøidáno - jazykové konstanty v jazycích &lt;en&gt;, &lt;de&gt; a &lt;de-utf8&gt;</li>	
				<li>zmìnìno - uspoøádání funkcí pluginu, aby byly pøehlednj¹í a ohebnìj¹í pro dal¹í vylep¹ení</li>	
				<li>zmìnìno - dlm_functions.js podporuje funkce oznaèení/odznaèení</li>	
				<li>pøidáno - oznaèit a pøesunout v¹echny vybrané soubory ve vstupním adresáøi do vybraného adresáøe</li>	
				<li>pøidáno - oznaèit a vymazat v¹echny oznaèené soubory v kategorii - soubory budou pøesunuty do vstupního (ftp/trash) adresáøe, aby se pøede¹lo nechtìnému zlikvidování souborù</li>	
			</ul>

			<li>verze 0.23.1, 16.8.2010, [Ian Timbalu]</li>	
			<ul>	
				<li>Zvý¹ení verze, aby se do CVS (Spartacus) dostaly soubory dodateènì pøidané k verzi 0.23.</li>	
			</ul>

			<li>verze 0.23, 11.8.2010, [Ian Timbalu]</li>	
			<ul>	
				<li>pøidáno - zobrazování souborù v koøenovém adresáøi v backendu (oprava chyby, kde se soubory pøesunuté do koøenového adresáøe nezobrazovaly). Frontend nezobrazoval/nezobrazuje soubory v koøenovém adresáøi, co¾ vlastnì není chyba, odteï je to feature :-).</li>	
				<li>zmìnìno - chování práce souborù v dlm, aby byly podporovány i soubory v koøenovém adresáøi (oznamte chybu, pokud zaznamenáte divné chování)</li>	
				<li>pøidáno - tlaèítko "stáhnout soubor" do backendu</li>	
				<li>zmìnìno - adresáø 'dlmanager/incoming' na '.dlmanager/incoming' (pouze v nových instalacích!), tak¾e se nezobrazuje, kdy¾ plugin zobrazuje hodnoty z mediatéky (pokud se Vá¹ blog tak chová, sma¾te ruènì adresáø 'uploads/dlmanager', pøi pøí¹tím downloadu bude vytvoøen správný adresáø.</li>	
				<li>opraveno - download souborù s mezerami v názvu - mezery jsou nahrazeny podtr¾ítkem (_)</li>	
				<li>pøidáno - do CVS chybìjící missing style_dlmanager_frontend.css</li>	
				<li>pøidáno - stylopis style_dlmanager_backend.css, aby podporoval budoucí ¹ablony backendu</li>	
				<li>pøidno - dlm_functions.js, aby podporoval budoucí javascript v backendu - doteï pou¾íván pro rozbalovatelné divy</li>	
				<li>pøidáno - chybìjící uzvavírací tagy &lt;/div&gt; - snad u¾ jsou v¹echny na správných místech</li>	
			</ul>

			<li>verze 0.221, 9.8.2010, [Ian Timbalu]</li>	
			<ul>	
				<li>opraveno - ¹patný výchozí adresáø, pokud nic nebylo zadáno v nastavení pluginu</li>	
			</ul>

			<li>verze 0.22, 8.8.2010, [Ian Timbalu]</li>	
			<ul>	
				<li>zmìnìno - adresáø pro upload na 'serendipity/uploads/dlmanager/incoming' (pouze pøi nové instalaci!)</li>	
				<li>zmìnìno - adresáø pro download na 'serendipity/templates_c/.dlmanager/files' (pouze pøi nové instalaci!)</li>	
				<li>pøidáno - chybìjící vytvoøení adresáøù pomocí rekurzivní funkce mkdir pøidané v PHP 5.0.0</li>	
				<li>opraveno - chyba a varování ve funkci is_dir($handle)</li>	
				<li>pøidáno - mo¾nost mít vlastní stylopis pluginu s minimálními startovacími hodnotami</li>	
				<li>zmìnìno - *.tpl ¹ablony frontendu, aby podporovaly tyto zmìny</li>	
			</ul>

			<li>verze 0.21, 25.8.2009, [dma147 - Alexander Mieland, <a href="http://blog.linux-stats.org">http://blog.linux-stats.org</a>, <a href="mailto:dma147@linux-stats.org">mailto: dma147@linux-stats.org</a>; kontaktujte mne na IRC na irc.freenode.net v #linux-stats, #archlinux, #archlinux.de a #s9y]</li>	
			<ul>	
				<li>kompatibilita s PHP 5.3, funkce split() není podporována</li>	
			</ul>

			<li>verze 0.20, 26.10.2007</li>	
			<ul>	
				<li>prùhledné obrázky (díky u¾ivateli [ICE]!)</li>	
				<li>zmìnìn soubor download.gif na download.png, kvùli lep¹ímu vzhledu prùhledných èástí (díky u¾ivateli [Don Chambers]!)</li>	
			</ul>

			<li>verze 0.19, 7.9.2007, [brockhaus]</li>	
			<ul>	
				<li>pøidáno - volitelný popis souboru v seznamu souborù</li>	
				<li>pøidáno - volitelný pøímý download v seznamu souborù</li>	
				<li>pøidáno - CSS tøídy v zobrazení seznamu souborù</li>	
				<li>popis podporuje zalomení øádkù</li>	
				<li>pøelo¾eny chybející èástí do nìmèiny</li>	
				<li>pøidán obrázek *.mp3</li>	
			</ul>

			<li>verze 0.6, 21.9.2005, [dma147]</li>	
			<ul>	
				<li>release verze 0.6</li>	
				<li>kompletní pøepsání u¾ivatelského rozhraní do ¹ablon smarty</li>	
				<li>skryté kategorie si nyní mohou zobrazit registrovaní u¾ivatelé</li>
				<li>pøidána mo¾nost pøejmenovat kategorie</li>	
			</ul>

			<li>verze 0.5, 20.9.2005, [dma147]</li>	
			<ul>	
				<li>release verze 0.5</li>	
				<li>pøidáno - mo¾nost skrýt kategorie (pøi kliknutí na ikonu slo¾ky)</li>
			</ul>

			<li>verze 0.4, 17.9.2005, [dma147]</li>	
			<ul>	
				<li>release verze 0.4</li>
				<li>pøidáno - zobrazení content-type pøi pøejetí ikony souboru my¹í</li>
				<li>pøidáno - import souborù s mediatéky</li>
				<li>opraveno - vzhled struktury kategorií (ikony)</li>
				<li>pøidáno - nastavení ¹íøky a vý¹ky ikon souborù</li>
				<li>dokonèeny permalinky (tady to nebude fungovat, ale na jiných blozích na apachi to funguje, tak¾e to vzdávám. S *mým* apachem musí být nejaký konfiguraèní problém.)</li>
				<li>po *opravdu* tvrdé práci jsem koneènì zprovoznil zobrazování podkategorií! (vnoøené sady jsou vá¾nì hustý! ;-))</li>
			</ul>

			<li>verze ???, 16.9.2005, [dma147]</li>	
			<ul>	
				<li>stejnì jako 15.9.2005</li>
			</ul>

			<li>verze ???, 15.9.2005, [dma147]</li>	
			<ul>	
				<li>poøád makám na podkategoriích</li>
				<li>poøád makám na permalinku</li>
			</ul>

			<li>verze ???, 14.9.2005, [dma147]</li>	
			<ul>	
				<li>pou¾it diff od u¾ivatele [Rob] týkající se peramlinku</li>
				<li>pokus rozchodit tyhle permalinky (s pøedpokladem, ¾e nastavení mého apache je správné)</li>
				<li>opraveno - výstup &quot; v jazykových konstantách</li>
				<li>zmìnìno - #dls na #files, aby se zabránilo zmatkùm</li>
				<li>pøidáno - mime typy a ikony pro soubory palmpilot (díky u¾ivateli [Rob])</li>
				<li>zaèal jsem pracovat na zobrazení podkategirií v seznamu souborù</li>
			</ul>

			<li>verze 0.3, 12.9.2005, [dma147]</li>	
			<ul>	
				<li>release verze 0.3</li>
				<li>opraveno - sql dotazy pro databázi postgresql</li>
				<li>zmìnìno - natvrdo kódované cesty (k obrázkùm) na automaticky detekovanou relativní cestu (getRelPath())</li>
				<li>opraveno - výchozí cesta pro adresáøe pro download a pøíchozí soubory</li>
				<li>zmìnìno - addslashes() na serendipity_db_escape_string()</li>
				<li>pøidáno - hook pro download (u¾ ¾ádná dal¹í vyskakovací okna pøi stahování!!!)</li>
			</ul>

			<li>verze ???, 11.9.2005, [dma147]</li>	
			<ul>	
				<li>pøidáno - nastavitelné zobrazování data souboru</li>
				<li>pøidáno - mnohem lep¹í a mnoho dal¹ích ikon souborù</li>
				<li>pøidáno - mnohem více mime typù</li>
				<li>zmìnìno - funkce pro detekci mime typu</li>
				<li>pøidáno - nastavení dal¹ích polo¾ek seznamu souborù</li>
				<li>pøidáno - nìmecký jazykový soubor</li>
			</ul>

			<li>verze 0.1, 10.9.2005, [dma147]</li>	
			<ul>	
				<li>release verze 0.1</li>
				<li>dokonèeno - upload souborù skrz webové rozhraní</li>
				<li>vytvoøeno - u¾ivatelská èást</li>
				<li>dokonèeno - zobrazení stromu kategorií</li>
				<li>dokonèeno - zobrazení sezanmu souborù</li>
				<li>dokonèeno - download souborù</li>
			</ul>

			<li>verze ???, 9.9.2005, [dma147]</li>	
			<ul>	
				<li>dokonèeno - pøidávání, mazání a editace kategorií</li>
				<li>dokonèeno - správa souborù nahraných do vstupního adresáøe</li>
				<li>zapoèato - nahrávání souborù skrz webové rozhraní</li>
			</ul>

			<li>verze ???, 9.9.2005, [dma147]</li>	
			<ul>	
				<li>Zaèátek vytváøení pluginu downloadmanager pro Serendipity</li>
			</ul>
		</ul>

	</body>
</html>
